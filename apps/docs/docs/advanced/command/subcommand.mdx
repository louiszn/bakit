---
sidebar_position: 2
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Admonition from "@theme/Admonition";

# Subcommand

Subcommand is another way to organize your commands.
When you have many commands that are related to each other, you might want to group it into a command with subcommands. For example:

```
/giveaway start
/giveaway stop
/giveaway info
```

Bakit provides an API that helps you define subcommands easily without creating a massive `SlashCommandBuilder` chain in your code.

<Admonition type="caution" title="Chaining limitation">
	
Subcommand system is tied 100% to the original Discord slash command system. 
This means Bakit mirrors Discord's official subcommand nesting rules, so you cannot go deeper than `root -> group -> subcommand`.

This also affects prefix command to reduce API's complexity.

</Admonition>

## Adding subcommands

It's basically the same as creating a normal command, but also including a subcommand in it.
To add a subcommand, simply use `<RootEntry>.subcommand(name | options)`:

```ts
import { Command, type Context } from "bakit";

const Giveaway = Command("giveaway");

const Start = Giveaway.subcommand("start");
const Stop = Giveaway.subcommand("stop");

@Command.use(Giveaway)
export default class Giveaway {
	@Giveaway.main
	public async execute(context: Context) {
		console.log("The command is executed");
	}

	@Start.main
	public async executeStart(context: Context) {
		// Handle giveaway creation...
		// ...
		await context.send("Created a new giveaway");
	}

	@Stop.main
	public async executeStop(context: Context) {
		// Handle giveaway deletion...
		// ...
		await context.send("Stopped the giveaway");
	}
}
```

In this example, Bakit will create 2 subcommands, `/giveaway stop` and `/giveaway start`.

## Adding groups

A subcommand group is a group that contains subcommands, just like command root. To add a group, simply use `<RootEntry>.group(name | options)`:

```ts
import { Command, type Context } from "bakit";

const Giveaway = Command("giveaway");

const Embed = Giveaway.group("embed");
const EmbedEdit = Embed.subcommand("edit");
const EmbedDisplay = Embed.subcommand("display");

@Command.use(Giveaway)
export default class Giveaway {
	@Giveaway.main
	public async execute(context: Context) {
		console.log("The command is executed");
	}

	@Embed.main
	public async executeEmbed(context: Context) {
		console.log("Embed group is executed");
	}

	@EmbedEdit.main
	public async executeEmbedEdit(context: Context) {
		await context.send("Edited the embed");
	}

	@EmbedDisplay.main
	public async executeEmbedDisplay(context: Context) {
		await context.send("Here's the embed: ...");
	}
}
```

In this example, Bakit will create 2 subcommands in a group, `/giveaway embed edit` and `/giveaway embed display`.

## Running order

The order of running subcommands is pretty simple, it will execute the parent first and then the child.

For example, if you run command `/giveaway embed display`:
```
/giveaway embed display
1. execute()
2. executeEmbed()
3. executeEmbedDisplay()
```

Creating hook for parent is optional, but you may still need it to perform general tasks of the subcommands.

## Prefix support

Subcommand fully supports prefix command as well. The usage is also the same as slash command syntax:

```
<prefix> <name> <group> <subcommand>
```

For example:

```
!giveaway start
!giveaway stop
!giveaway embed edit
!giveaway embed display
```
