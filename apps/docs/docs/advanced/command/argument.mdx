---
sidebar_position: 3
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Admonition from "@theme/Admonition";

# Argument

Argument system is another special feature in command system. It helps you defining what can users provide for your bot naturally with customizable syntax handle.

## Supported types

For now, argument system supports the following types:

| Type name | Value                                                                                   | Supported options        | Description                              |
| --------- | --------------------------------------------------------------------------------------- | ------------------------ | ---------------------------------------- |
| string    | `string`                                                                                | `minLength`, `maxLength` | Raw text input.                          |
| number    | `number`                                                                                | `minValue`, `maxValue`   | Any number (integer or float).           |
| integer   | `number`                                                                                | `minValue`, `maxValue`   | Integers only.                           |
| user      | [`User`](https://discord.js.org/docs/packages/discord.js/main/User:Class)               | -                        | A Discord user (via mention or user ID). |
| member    | [`GuildMember`](https://discord.js.org/docs/packages/discord.js/main/GuildMember:Class) | -                        | A guild member (via mention or user ID). |

## Base argument options

Besides supported options from [Supported types](#supported-types), all argument will have these options:

| Name          | Type       | Default Value    | Description                      |
| ------------- | ---------- | ---------------- | -------------------------------- |
| `name`        | `string`   | -                | The name of the argument.        |
| `description` | `?string`  | `<name> command` | The description of the argument. |
| `required`    | `?boolean` | `true`           | Mark the argument as required.   |

## Basic usage

The basic syntax is `@Arg.<type>(<name | options>) <name>: <value>`.

Here's an example for `avatar` command:

```ts
import { type Context, Command, Arg } from "bakit";
import { type User } from "discord.js";

const Avatar = Command("avatar");

@Command.use(Avatar)
export default class AvatarCommand {
	@Avatar.main
	public async execute(context: Context, @Arg.user("user") user: User) {
		await context.send(user.displayAvatarURL());
	}
}
```

In this example:

- The command takes a `user` argument of type `user`.
- The decorator automatically resolves the user ID or mention to a `User` object.
- Bakit will resolve this automatically and register command with `user` option.

## Optional argument

Argument is required by default, if you want to make it optional, you can use options object with `required: false`:

```ts
public async execute(
	ctx: Context,
	@Arg.user({ name: "user", required: false }) user: User | null,
) { ... }
```

If the argument is not provided, it will be passed as `null`.

## Runtime type safety

<Admonition type="caution" title="Double-check the argument type">
	
TypeScript decorators limit compile-time checks for decorators, so the decorator metadata may not catch mismatched types. For example:

```ts
public async execute(
	ctx: Context,
	@Arg.user({ name: "user", required: false }) user: string,
) { ... }
```

This can compile, but can break at runtime. Always validate and guard argument values in your handler when appropriate.

</Admonition>

## Using with subcommands

For subcommands, if you put arguments in parent hook, you have to including again in child hook. For example:

```ts
import { Command, type Context, Arg } from "bakit";

const Giveaway = Command("giveaway");

const Restart = Giveaway.subcommand("restart");
const Stop = Giveaway.subcommand("stop");

@Command.use(Giveaway)
export default class Giveaway {
	@Giveaway.main
	public async execute(context: Context, @Arg.string("id") giveawayId: string) {
		console.log("The command is executed");
	}

	@Restart.main
	public async executeRestart(context: Context, giveawayId: string) {
		console.log("Restart subcommand is executed");
	}

	@Stop.main
	public async executeStop(context: Context, giveawayId: string, @Arg.string("reason") reason: string) {
		console.log(`Stop subcommand is executed: ${reason}`);
	}
}
```

For slash command, Bakit will organize required argument first, then optional ones to satisfies Discord API:

```
/giveaway restart <id>
/giveaway stop <id> <reason>
```

For prefix command, arguments is put the exact position that you defined:

```
!giveaway <id> restart
!giveaway <id> stop
```
